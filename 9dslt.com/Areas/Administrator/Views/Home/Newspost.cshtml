@{
    ViewBag.Title = "Newspost";
    Layout = "~/Areas/Administrator/Views/Shared/_Layout.cshtml";
}

@{
    if (TempData["errornews"] != null)
    {
        <div class="alert alert-error" style="margin-top: 55px;">
            <h4><i class="fa fa-warning"> Lỗi!</i></h4>
            <i style="font-size: 14px;">Nhập đầy đủ thông tin đi</i>
        </div>
    }
    if (TempData["successnews"] != null)
    {
        <div class="alert alert-success" style="margin-top: 55px;">
            <h4><i class="fa fa-warning"> Thành công!</i></h4>
            <i style="font-size: 14px;">Thêm vật phẩm mới thành công</i>
        </div>
    }
}

<div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
        <div class="x_title">
            <h2>Viết một bài mới trên trang chủ</h2>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <br>

                @using (Html.BeginForm("Newspost", "Home", FormMethod.Post, new { @class = "form-horizontal form-label-left" }))
                {
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Tên chủ đề</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            @Html.TextBox("newsName", "", new { @class = "form-control", @placeholder = "Nhập tên chủ đề..." })
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Loại bài viết</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            <select id="MovieType" style="background: #F0F0E9;
    font-size: 14px;
    color: #696763;
    padding: 6px;
    width: 100%;
    border-radius: 0;
    resize: none;
    outline: none;
    border: 1px solid #ccc;" name="MovieType">
                                <option selected="selected" value="1">Tin tức</option>
                                <option value="2">hỗ trợ</option>
                                <option value="3">khuyến mãi</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">
                            <input type="button" id="ts" value="Lấy ảnh bìa" />
                            <script>
                                $("#ts").click(function () {
                                    var finder = new CKFinder();
                                    finder.selectActionFunction = function (fileUrl) {
                                        //fileUrl = fileUrl.split("~")[1];
                                        //fileUrl = "/" + fileUrl;
                                        $("#pic").val(fileUrl);
                                    };
                                    finder.popup();
                                });
                            </script>
                        </label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            @Html.TextBox("newsImages", "", new { @class = "form-control", @id = "pic", @placeholder = "Nhập tên chủ đề..." })
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">
                            Mô tả chủ đề <span class="required">*</span>
                        </label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            @Html.TextArea("newsDescription", "", new { @class = "form-control", @rows = "3" })
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">
                            <input type="button" id="ts2" value="Lấy link ảnh bài viết" />
                            <script>
                                $("#ts2").click(function () {
                                    var finder = new CKFinder();
                                    finder.selectActionFunction = function (fileUrl) {
                                        //fileUrl = fileUrl.split("~")[1];
                                        //fileUrl = "/" + fileUrl;
                                        $("#pic1").val(fileUrl);
                                    };
                                    finder.popup();
                                });
                            </script>
                        </label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                            @Html.TextBox("newsImagesa", "", new { @class = "form-control", @id = "pic1", @placeholder = "Lấy link ảnh bài viết..." })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.TextArea("newsContent", "", new { @class = "ckeditor", @id = "ckeditor" })
                        <script>
                            CKEDITOR.replace('ckeditor')

                            //$("#cke_127_uiElement").click(function (e) {
                            //    var finder = new CKFinder();
                            //    finder.selectActionFunction = function (fileUrl) {
                            //        //fileUrl = fileUrl.substring(fileUrl.lastIndexOf("/") + 1);
                            //        fileUrl = fileUrl.split("~")[1];
                            //        fileUrl = "/" + fileUrl;
                            //        document.getElementById("cke_123_textInput").value = fileUrl;
                            //    };
                            //    finder.popup();
                            //})
                        </script>
                    </div>


                    <div class="ln_solid"></div>
                    <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                            <button class="btn btn-primary">Cancel</button>
                            <button type="submit" class="btn btn-success">Submit</button>
                        </div>
                    </div>
                }

        </div>
    </div>
</div>